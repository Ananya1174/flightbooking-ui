<div class="search-page">

  <div class="page-header">
    <h1>Search Flights</h1>
    <p>Find the best flights for your journey</p>
  </div>

  <div class="search-layout">

    <aside class="filters">

      <h2>Your Search</h2>

      <form [formGroup]="searchForm" (ngSubmit)="searchFlights()">

        <label>From</label>
        <select formControlName="origin">
          <option value="" disabled selected>Select Origin</option>
          <option *ngFor="let airport of airports" [value]="airport.code">
            {{ airport.name }} ({{ airport.code }})
          </option>
        </select>

        <label>To</label>
        <select formControlName="destination">
          <option value="" disabled selected>Select Destination</option>
          <option
            *ngFor="let airport of airports"
            [value]="airport.code"
            [disabled]="isDestinationDisabled(airport.code)">
            {{ airport.name }} ({{ airport.code }})
          </option>
        </select>

        <label>Travel Date</label>
        <input type="date" formControlName="travelDate" [min]="minDate" />

        <button type="submit" [disabled]="searchForm.invalid || loading">
          {{ loading ? 'Searching…' : 'Search Flights' }}
        </button>

        <p class="error" *ngIf="searchForm.invalid && searchForm.touched">
          Please fill all fields
        </p>

      </form>
    </aside>

    <main class="results">

      <h2>Available Flights</h2>

      <p class="empty" *ngIf="!loading && flights.length === 0">
        No flights found. Try a different search.
      </p>

      <div class="flight-card" *ngFor="let flight of flights">

        <div class="flight-left">
          <div class="airline">{{ flight.airlineName }}</div>

          <div class="time-row">
            <div>
              <div class="time">{{ flight.departureTime | date:'HH:mm' }}</div>
              <div class="place">{{ flight.origin }}</div>
            </div>

            <div class="route">
              ✈
              <span>{{ flight.duration || '2h 10m' }}</span>
            </div>

            <div>
              <div class="time">{{ flight.arrivalTime | date:'HH:mm' }}</div>
              <div class="place">{{ flight.destination }}</div>
            </div>
          </div>
        </div>

        <div class="flight-right">
          <div class="trip">{{ flight.tripType }}</div>
          <div class="price">₹{{ flight.price }}</div>
          <button (click)="goToBooking(flight)">Book</button>
        </div>

      </div>

    </main>

  </div>

</div>